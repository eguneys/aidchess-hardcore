var h=Object.defineProperty;var m=(o,e,t)=>e in o?h(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var c=(o,e,t)=>(m(o,typeof e!="symbol"?e+"":e,t),t);const p=o=>o!==void 0,a=o=>{const e={get:t=>o.getItem(t),set:(t,s)=>o.setItem(t,s),remove:t=>o.removeItem(t),make:t=>({get:()=>e.get(t),set:s=>e.set(t,s),remove:()=>e.remove(t)}),makeBoolean:t=>({get:()=>e.get(t)=="1",set:s=>e.set(t,s?"1":"0"),toggle:()=>e.set(t,e.get(t)=="1"?"0":"1")})};return e},n=a(window.localStorage),d=(o,e)=>t=>{if(p(t))return n.set(o,JSON.stringify(t)),t;const s=JSON.parse(n.get(o));return s!==null?s:e()};class g{constructor(){c(this,"_completed");this._completed=this._prop("completed",[])}_key(e){return["aidchess","challenges",e].join(".")}_prop(e,t){return d(this._key(e),()=>t)}clear(){this._completed([])}complete(e){let t=this.completeds;t.includes(e)||t.push(e),this._completed(t)}get completeds(){return this._completed()}}const i=new g,u=[{key:"white20",description:"Get to 20 moves with White"},{key:"black20",description:"Get to 20 moves with Black"}],_=o=>JSON.parse(JSON.stringify(o)),r=class{constructor(){c(this,"challenges");c(this,"check_challenge_game",e=>{e.moves.length>=20&&(e.color==="white"?this.complete("white20"):this.complete("black20"))})}boot(){this.challenges=_(u);let{completeds:e}=i;this.challenges.forEach(t=>{e.includes(t.key)?t.completed=!0:t.completed=void 0})}complete(e){i.complete(e),this.boot()}clear(){i.clear(),this.boot()}};let l=r;c(l,"make",()=>{let e=new r;return e.boot(),e});const w=l.make();export{w as C};
